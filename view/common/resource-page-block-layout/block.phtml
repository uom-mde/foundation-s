<?php
/**
 * @var \Laminas\View\Renderer\PhpRenderer $this
 * @var \Omeka\Api\Representation\AbstractResourceEntityRepresentation $resource
 * @var \Laminas\View\Renderer\PhpRenderer $this
 * @var \Omeka\Api\Representation\SitePageBlockRepresentation $block
 * @var \Omeka\Api\Representation\SiteBlockAttachmentRepresentation[] $attachments
 */

// A simple block to do something not possible with default blocks.

$plugins = $this->getHelperPluginManager();
$translate = $plugins->get('translate');
?>

<div class="block resource-block block-simple">
    <?php
        $siteTitle = $site->title();
        if ($siteTitle === 'Omeka 4 Test') {
            // Fetch all values for 'dcterms:date' (assuming it's a collection-related field)
            $collectionItems = $item->value('dcterms:date', ['all' => true]);
            if (!empty($collectionItems)) {
                echo '<div class="collection-items">';
                foreach ($collectionItems as $collectionItem) {
                    if (is_array($collectionItem)) {
                        // If $collectionItem is an array of values, output each one
                        echo '<div class="collection-item">';
                        foreach ($collectionItem as $value) {
                            echo '<span>' . $value . '</span>'; // Output each collection item value
                        }
                        echo '</div>';
                    } else {
                        // Handle single value case
                        echo '<div class="collection-item"><span>' . $collectionItem . '</span></div>';
                    }
                }
                echo '</div>';
            }
        }
    ?>
</div>